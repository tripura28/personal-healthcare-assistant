<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Personal Healthcare Assistant</title>
  <!-- React & ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Recharts -->
  <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background-color: #f9f9f9; }
    h1 { text-align: center; color: #333; }
    .card { border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 15px 0; background: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    .card h2 { margin-top: 0; color: #007bff; }
    .input-group { margin: 10px 0; }
    input { padding: 5px; margin-right: 10px; }
    button { padding: 5px 10px; cursor: pointer; background-color: #007bff; color: #fff; border: none; border-radius: 5px; }
  </style>
</head>
<body>
  <h1>Personal Healthcare Assistant</h1>
  <div id="root"></div>

  <script type="text/javascript">
    const { useState, useEffect } = React;
    const { PieChart, Pie, Cell, Tooltip, Legend, LineChart, Line, XAxis, YAxis, CartesianGrid } = Recharts;

    const API_BASE = "http://127.0.0.1:5000"; // Change to your deployed Flask backend if needed

    function PregnantForm() {
      const [trimester, setTrimester] = useState("");
      const [result, setResult] = useState(null);

      const handleSubmit = async () => {
        if (!trimester) return alert("Enter trimester (1-3)");
        const res = await fetch(`${API_BASE}/pregnant/recommendation`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ trimester })
        });
        const data = await res.json();
        setResult(data);
      };

      return React.createElement("div", { className: "card" },
        React.createElement("h2", null, "Pregnant Dietary Recommendation"),
        React.createElement("div", { className: "input-group" },
          React.createElement("input", { type: "number", min: 1, max: 3, placeholder: "Trimester (1-3)", value: trimester, onChange: e => setTrimester(e.target.value) }),
          React.createElement("button", { onClick: handleSubmit }, "Get Recommendation")
        ),
        result && React.createElement("div", null,
          React.createElement("p", null, "Diet: " + result.diet),
          React.createElement("p", null, "Supplements: " + result.supplements),
          React.createElement("p", null, "Next Checkup: " + result.next_checkup)
        )
      );
    }

    function PatientForm() {
      const [condition, setCondition] = useState("");
      const [result, setResult] = useState(null);

      const handleSubmit = async () => {
        if (!condition) return alert("Enter a condition");
        const res = await fetch(`${API_BASE}/patient/recommendation`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ condition })
        });
        const data = await res.json();
        setResult(data);
      };

      return React.createElement("div", { className: "card" },
        React.createElement("h2", null, "Patient Recommendation"),
        React.createElement("div", { className: "input-group" },
          React.createElement("input", { type: "text", placeholder: "Condition (diabetes, tumor)", value: condition, onChange: e => setCondition(e.target.value) }),
          React.createElement("button", { onClick: handleSubmit }, "Get Recommendation")
        ),
        result && React.createElement("div", null,
          React.createElement("p", null, "Medications: " + result.medications),
          React.createElement("p", null, "Diet: " + result.diet),
          React.createElement("p", null, "Exercise: " + result.exercise)
        )
      );
    }

    function Charts({ data }) {
      if (!data) return null;

      const dietData = [
        { name: "Carbs", value: data.carbs || 0 },
        { name: "Protein", value: data.protein || 0 },
        { name: "Iron", value: data.iron || 0 },
      ];

      const COLORS = ["#0088FE", "#00C49F", "#FFBB28"];

      return React.createElement("div", { className: "card" },
        React.createElement("h2", null, "Diet Composition Chart"),
        React.createElement(PieChart, { width: 400, height: 300 },
          React.createElement(Pie, { data: dietData, dataKey: "value", nameKey: "name", cx: "50%", cy: "50%", outerRadius: 80, label: true },
            dietData.map((entry, index) => React.createElement("Cell", { key: index, fill: COLORS[index % COLORS.length] }))
          ),
          React.createElement(Tooltip),
          React.createElement(Legend)
        )
      );
    }

    function App() {
      return React.createElement("div", null,
        React.createElement(PregnantForm),
        React.createElement(PatientForm)
        // You can pass data to Charts component if available
      );
    }

    ReactDOM.render(React.createElement(App), document.getElementById("root"));
  </script>
</body>
</html>
